{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,0BAIEC,EAAS,IAAAC,QACTC,EAAQ,IAAAD,Q,2CCCV,MAAME,EAASC,SAASC,cAAc,eAChCC,EAAYF,SAASC,cAAc,YACnCE,EAAYH,SAASC,cAAc,cAEnCG,EAAa,IDPZ,MAULC,qBACE,OAAOC,EAAAC,GAAMC,IAAI,IAAC,EAAAd,EAAAe,SAAEC,KAAMd,KAAY,CACpCe,OAAQ,CACNC,KAAG,EAAAlB,EAAAe,SAAEC,KAAMZ,GACXe,EAAGH,KAAKI,MACRC,WAAY,QACZC,YAAa,aACbC,WAAY,OACZC,KAAMR,KAAKQ,KACXC,SAAUT,KAAKS,W,CAfrBC,eAHA,EAAAC,EAAAZ,SAAAC,KAAAd,EAAS,C,kBAAG,8BACZ,EAAAyB,EAAAZ,SAAAC,KAAAZ,EAAQ,C,kBAAG,uCAGTY,KAAKQ,KAAO,EACZR,KAAKI,MAAQ,KACbJ,KAAKS,SAAW,E,GCEdG,EAAiB,IAAIhB,EAAAiB,GAAJ,CAAmB,mBAAoB,CAC5DC,cAAe,MAGjBzB,EAAO0B,iBAAiB,UAGxB,SAAsBC,GACpBA,EAAEC,iBAEFvB,EAAWU,MAAQY,EAAEE,cAAcC,SAASC,OAAOC,MACnD3B,EAAWc,KAAO,EAElBd,EACGC,qBACA2B,MAAKC,GAC8B,IAA9BA,EAASC,KAAKC,KAAKC,QACrBC,EAAAC,OAAOC,QACL,4EAEFrC,EAAUsC,UAAY,GACtBrC,EAAUsC,UAAUC,IAAI,kBACxBhB,EAAEiB,OAAOC,SAIPxC,EAAWc,OAASe,EAASC,KAAKW,WACpC1C,EAAUsC,UAAUC,IAAI,aACxBxC,EAAUsC,WAAY,EAAAM,EAAArC,SAAUwB,EAASC,KAAKC,WAC9CE,EAAAC,OAAOS,QAAQ,oBAAoBd,EAASC,KAAKW,sBAI/CZ,EAASC,KAAKC,KAAKC,OAAShC,EAAWe,UACzCkB,EAAAC,OAAOS,QAAQ,oBAAoBd,EAASC,KAAKW,qBACjD3C,EAAUsC,WAAY,EAAAM,EAAArC,SAAUwB,EAASC,KAAKC,WAC9ChC,EAAUsC,UAAUC,IAAI,eAG1BM,QAAQC,IAAIhB,EAASC,KAAKC,MAC1BE,EAAAC,OAAOS,QAAQ,oBAAoBd,EAASC,KAAKW,qBACjD3C,EAAUsC,WAAY,EAAAM,EAAArC,SAAUwB,EAASC,KAAKC,WAC9ChC,EAAUsC,UAAUS,OAAO,gBAE5BlB,MAAK,KACJV,EAAe6B,SAAS,IAEzBC,OAAMC,IACLL,QAAQC,IAAII,EAAI,G,IA3CtBlD,EAAUsB,iBAAiB,SA+C3B,WACErB,EAAWc,MAAQ,EAEnBd,EACGC,qBACA2B,MAAKC,IACAA,EAASC,KAAKC,KAAKC,OAAShC,EAAWe,WACzChB,EAAUsC,UAAUC,IAAI,aACxBL,EAAAC,OAAOgB,KACL,+DAIJpD,EAAUqD,mBAAmB,aAAa,EAAAT,EAAArC,SAAUwB,EAASC,KAAKC,MAAM,IAEzEH,MAAK,KACJV,EAAe6B,SAAS,IAEzBC,OAAMC,IACLL,QAAQC,IAAII,EAAI,G","sources":["src/js/photo-card.js","src/index.js"],"sourcesContent":["'use strict';\nimport axios from 'axios';\n\nexport class PixabayApi {\n  #BASE_URL = 'https://pixabay.com/api/';\n  #API_KEY = '28742881-7ed4fdaa96807499761d63f05';\n\n  constructor() {\n    this.page = 1;\n    this.qeury = null;\n    this.per_page = 21;\n  }\n\n  fetchPhotosByQuery() {\n    return axios.get(`${this.#BASE_URL}`, {\n      params: {\n        key: this.#API_KEY,\n        q: this.qeury,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        page: this.page,\n        per_page: this.per_page,\n      },\n    });\n  }\n}\n","import { PixabayApi } from './js/photo-card';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport photoCard from './templates/photo-card.hbs';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nconst formEl = document.querySelector('.search-bar');\nconst galleryEl = document.querySelector('.gallery');\nconst loadBtnEl = document.querySelector('.load-more');\n\nconst pixabayAPI = new PixabayApi();\n\nconst simplelightbox = new SimpleLightbox('.gallery__item a', {\n  captionsDelay: 250,\n});\n\nformEl.addEventListener('submit', onFormSubmit);\nloadBtnEl.addEventListener('click', onLoadBtnClick);\n\nfunction onFormSubmit(e) {\n  e.preventDefault();\n\n  pixabayAPI.qeury = e.currentTarget.elements.search.value;\n  pixabayAPI.page = 1;\n\n  pixabayAPI\n    .fetchPhotosByQuery()\n    .then(response => {\n      if (response.data.hits.length === 0) {\n        Notify.failure(\n          'Sorry, there are no images matching your search query. Please try again.'\n        );\n        galleryEl.innerHTML = '';\n        loadBtnEl.classList.add('is-hidden');\n        e.target.reset();\n        return;\n      }\n\n      if (pixabayAPI.page === response.data.totalHits) {\n        loadBtnEl.classList.add('is-hidden');\n        galleryEl.innerHTML = photoCard(response.data.hits);\n        Notify.success(`Hooray! We found ${response.data.totalHits} images.`);\n        return;\n      }\n\n      if (response.data.hits.length < pixabayAPI.per_page) {\n        Notify.success(`Hooray! We found ${response.data.totalHits} images.`);\n        galleryEl.innerHTML = photoCard(response.data.hits);\n        loadBtnEl.classList.add('is-hidden');\n        return;\n      }\n      console.log(response.data.hits);\n      Notify.success(`Hooray! We found ${response.data.totalHits} images.`);\n      galleryEl.innerHTML = photoCard(response.data.hits);\n      loadBtnEl.classList.remove('is-hidden');\n    })\n    .then(() => {\n      simplelightbox.refresh();\n    })\n    .catch(err => {\n      console.log(err);\n    });\n}\n\nfunction onLoadBtnClick() {\n  pixabayAPI.page += 1;\n\n  pixabayAPI\n    .fetchPhotosByQuery()\n    .then(response => {\n      if (response.data.hits.length < pixabayAPI.per_page) {\n        loadBtnEl.classList.add('is-hidden');\n        Notify.info(\n          \"We're sorry, but you've reached the end of search results.\"\n        );\n      }\n\n      galleryEl.insertAdjacentHTML('beforeend', photoCard(response.data.hits));\n    })\n    .then(() => {\n      simplelightbox.refresh();\n    })\n    .catch(err => {\n      console.log(err);\n    });\n}\n"],"names":["$43bai","parcelRequire","$544541c0238dd74d$var$_BASE_URL","WeakMap","$544541c0238dd74d$var$_API_KEY","$1f0dc3b9307be026$var$formEl","document","querySelector","$1f0dc3b9307be026$var$galleryEl","$1f0dc3b9307be026$var$loadBtnEl","$1f0dc3b9307be026$var$pixabayAPI","fetchPhotosByQuery","$parcel$interopDefault","$2shzp","get","default","this","params","key","q","qeury","image_type","orientation","safesearch","page","per_page","constructor","$h2iSt","$1f0dc3b9307be026$var$simplelightbox","$fZKcF","captionsDelay","addEventListener","e","preventDefault","currentTarget","elements","search","value","then","response","data","hits","length","$iQIUW","Notify","failure","innerHTML","classList","add","target","reset","totalHits","$cgQaQ","success","console","log","remove","refresh","catch","err","info","insertAdjacentHTML"],"version":3,"file":"index.28c9b397.js.map"}